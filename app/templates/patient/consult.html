{% extends "patient/base_patient.html" %}

{% block title %}New Consultation - {{ shop_settings.shop_name }}{% endblock %}

{% block patient_content %}
<div class="page-header">
    <h4><i class="bi bi-chat-dots"></i> New Consultation</h4>
    <p class="text-muted mb-0">Describe your symptoms and get professional advice</p>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <form method="POST" action="{{ url_for('patient.consult') }}">
                    {{ form.hidden_tag() }}
                    
                    <div class="mb-3">
                        <label class="form-label">Subject *</label>
                        {{ form.subject(class="form-control", placeholder="Brief description of your concern") }}
                        {% for error in form.subject.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Describe Your Symptoms *</label>
                        {{ form.symptoms(class="form-control", rows="4", placeholder="Please describe your symptoms in detail. Include when they started, severity, and any patterns you've noticed.") }}
                        {% for error in form.symptoms.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Additional Details *</label>
                        {{ form.message(class="form-control", rows="4", placeholder="Include any relevant medical history, allergies, current medications, or other information that might help us assist you better.") }}
                        {% for error in form.message.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Priority Level</label>
                        {{ form.priority(class="form-select") }}
                        <small class="text-muted">Select 'Urgent' only for serious or emergency symptoms.</small>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="bi bi-send"></i> Submit Consultation
                        </button>
                        <a href="{{ url_for('patient.dashboard') }}" class="btn btn-secondary btn-lg">
                            <i class="bi bi-x-circle"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card bg-light">
            <div class="card-body">
                <h5><i class="bi bi-lightbulb text-warning"></i> Tips for a Good Consultation</h5>
                <hr>
                <ul class="mb-0">
                    <li class="mb-2">Be as specific as possible about your symptoms</li>
                    <li class="mb-2">Include when symptoms started</li>
                    <li class="mb-2">Mention any medications you're currently taking</li>
                    <li class="mb-2">Note any allergies you have</li>
                    <li class="mb-2">Describe what makes symptoms better or worse</li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-3 border-danger">
            <div class="card-body">
                <h6 class="text-danger"><i class="bi bi-exclamation-triangle"></i> Emergency?</h6>
                <p class="small mb-0">If you're experiencing a medical emergency, please call emergency services immediately or visit the nearest hospital.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
